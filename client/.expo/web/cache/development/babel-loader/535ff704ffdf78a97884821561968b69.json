{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { Center, FormControl, Heading, HStack, Text, VStack, Input, Stack, Slider, Box, TextArea, ScrollView, Button, Image } from \"native-base\";\nimport { useRef, useState } from \"react\";\nimport { colors } from \"../utilis/colors\";\nimport * as ImagePicker from 'expo-image-picker';\nimport RecordVideo from \"../layout/recordVideo\";\nimport { Video } from \"expo-av\";\nimport { Camera } from \"expo-camera\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function ModalForAddRewards(_ref) {\n  var handleShowModal = _ref.handleShowModal;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      image = _useState2[0],\n      setImage = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      video = _useState4[0],\n      setVideo = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      onRecording = _useState6[0],\n      setOnRecording = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      stopRec = _useState8[0],\n      setStopRec = _useState8[1];\n\n  var videoRef = useRef(null);\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      sliderValue = _useState10[0],\n      setSliderValue = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      cameraPermission = _useState12[0],\n      setCameraPermission = _useState12[1];\n\n  var _useState13 = useState(),\n      _useState14 = _slicedToArray(_useState13, 2),\n      recordVideoPermission = _useState14[0],\n      setRecordVideoPermission = _useState14[1];\n\n  var _useState15 = useState(),\n      _useState16 = _slicedToArray(_useState15, 2),\n      audioPermission = _useState16[0],\n      setAudioPermission = _useState16[1];\n\n  var sliderOnChange = function sliderOnChange(v) {\n    setSliderValue(Math.floor(v));\n  };\n\n  var sliderOnChangeEnd = function sliderOnChangeEnd(v) {\n    setSliderValue(Math.floor(v));\n  };\n\n  var pickImage = function pickImage() {\n    var result;\n    return _regeneratorRuntime.async(function pickImage$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.All,\n              allowsEditing: true,\n              aspect: [4, 3],\n              quality: 1\n            }));\n\n          case 2:\n            result = _context.sent;\n            result ? setImage(result.uri) : null;\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var takePhoto = function takePhoto() {\n    var _await$Camera$request, status, _await$ImagePicker$la, uri, s, audio;\n\n    return _regeneratorRuntime.async(function takePhoto$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(Camera.requestCameraPermissionsAsync());\n\n          case 2:\n            _await$Camera$request = _context2.sent;\n            status = _await$Camera$request.status;\n            setCameraPermission(status === 'granted');\n            _context2.next = 7;\n            return _regeneratorRuntime.awrap(ImagePicker.launchCameraAsync());\n\n          case 7:\n            _await$ImagePicker$la = _context2.sent;\n            uri = _await$ImagePicker$la.uri;\n            setImage(uri);\n            _context2.next = 12;\n            return _regeneratorRuntime.awrap(Camera.requestCameraPermissionsAsync().status);\n\n          case 12:\n            s = _context2.sent;\n            setRecordVideoPermission(s === \"granted\");\n            _context2.next = 16;\n            return _regeneratorRuntime.awrap(Camera.requestMicrophonePermissionsAsync().status);\n\n          case 16:\n            audio = _context2.sent;\n            setAudioPermission(audio === \"granted\");\n\n          case 18:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var startRecordVideo = function startRecordVideo() {\n    var _await$videoRef$curre, uri;\n\n    return _regeneratorRuntime.async(function startRecordVideo$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(videoRef.current.recordAsync({\n              quality: '1080p'\n            }));\n\n          case 3:\n            _await$videoRef$curre = _context3.sent;\n            uri = _await$videoRef$curre.uri;\n            alert(uri);\n            setVideo(uri);\n            _context3.next = 12;\n            break;\n\n          case 9:\n            _context3.prev = 9;\n            _context3.t0 = _context3[\"catch\"](0);\n            alert(_context3.t0);\n\n          case 12:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n\n  var stopRecordVideo = function stopRecordVideo() {\n    var stopRec = videoRef.current.stopRecording();\n  };\n\n  var closeVideoRecording = function closeVideoRecording() {\n    setOnRecording(false);\n  };\n\n  return _jsx(_Fragment, {\n    children: onRecording ? _jsx(RecordVideo, {\n      start: startRecordVideo,\n      videoRef: videoRef,\n      stop: stopRecordVideo,\n      close: closeVideoRecording\n    }) : _jsx(ScrollView, {\n      children: _jsx(Center, {\n        children: _jsxs(VStack, {\n          w: \"100%\",\n          children: [_jsxs(HStack, {\n            alignItems: \"center\",\n            justifyContent: \"space-around\",\n            mt: \"60\",\n            mb: \"30\",\n            children: [_jsx(Text, {\n              onPress: function onPress() {\n                return handleShowModal(false);\n              },\n              children: \"Cancel\"\n            }), _jsx(Heading, {\n              children: \"Add Rewards\"\n            }), _jsx(Text, {\n              children: \"Save\"\n            })]\n          }), _jsx(Center, {\n            children: _jsxs(FormControl, {\n              w: \"80%\",\n              children: [_jsxs(Stack, {\n                mb: \"5\",\n                children: [_jsx(FormControl.Label, {\n                  children: \"Title\"\n                }), _jsx(Input, {\n                  p: 2,\n                  placeholder: \"Title\",\n                  p: \"6\",\n                  borderRadius: \"10\"\n                })]\n              }), _jsxs(Stack, {\n                mb: \"5\",\n                children: [_jsx(FormControl.Label, {\n                  children: \"URL/Link\"\n                }), _jsx(Input, {\n                  p: 2,\n                  placeholder: \"URL/Link\",\n                  p: \"6\",\n                  borderRadius: \"10\"\n                })]\n              }), _jsxs(VStack, {\n                mb: \"5\",\n                children: [_jsx(Text, {\n                  children: \"Points\"\n                }), _jsxs(Box, {\n                  bg: colors.gray,\n                  mt: \"3\",\n                  borderRadius: \"10\",\n                  p: \"5\",\n                  children: [_jsxs(Slider, {\n                    size: \"lg\",\n                    defaultValue: 0,\n                    onChange: sliderOnChange,\n                    onChangeEnd: sliderOnChangeEnd,\n                    videoRef: videoRef,\n                    children: [_jsx(Slider.Track, {\n                      children: _jsx(Slider.FilledTrack, {})\n                    }), _jsx(Slider.Thumb, {})]\n                  }), _jsxs(Text, {\n                    textAlign: \"center\",\n                    children: [\" \", sliderValue]\n                  })]\n                }), _jsx(Text, {\n                  mt: \"2\",\n                  fontSize: \"10\",\n                  children: \"Required Points\"\n                })]\n              }), _jsxs(VStack, {\n                mb: \"5\",\n                children: [_jsx(Text, {\n                  children: \"Attached Photos/Video\"\n                }), image ? _jsx(Image, {\n                  source: {\n                    uri: image\n                  },\n                  style: {\n                    width: 200,\n                    height: 200\n                  },\n                  alt: \"image\"\n                }) : null, video ? _jsx(Video, {\n                  style: {\n                    width: 200,\n                    height: 200\n                  },\n                  source: {\n                    uri: video\n                  },\n                  useNativeControls: true,\n                  resizeMode: \"contain\"\n                }) : null, _jsx(Button, {\n                  onPress: takePhoto,\n                  mb: \"2\",\n                  children: \"take an  image\"\n                }), _jsx(Button, {\n                  onPress: function onPress() {\n                    return setOnRecording(true);\n                  },\n                  mb: \"2\",\n                  children: \"record a video\"\n                }), _jsx(Button, {\n                  onPress: pickImage,\n                  children: \"Pic image\"\n                }), _jsx(Button, {\n                  onPress: function onPress() {\n                    return alert(video);\n                  },\n                  children: \"see url\"\n                })]\n              }), _jsxs(Stack, {\n                mb: \"5\",\n                children: [_jsx(FormControl.Label, {\n                  children: \"Notes\"\n                }), _jsx(TextArea, {\n                  p: 2,\n                  placeholder: \"Instruction, Guide, Help...\",\n                  p: \"6\",\n                  borderRadius: \"10\",\n                  height: \"150\"\n                })]\n              }), _jsxs(VStack, {\n                space: \"6\",\n                mb: \"70\",\n                children: [_jsx(Button, {\n                  p: \"5\",\n                  borderRadius: \"10\",\n                  children: \"Save\"\n                }), _jsx(Center, {\n                  children: _jsx(Button, {\n                    w: \"80%\",\n                    p: \"4\",\n                    borderRadius: \"10\",\n                    onPress: function onPress() {\n                      return handleShowModal(false);\n                    },\n                    children: \"Cancel/Delete\"\n                  })\n                })]\n              })]\n            })\n          })]\n        })\n      })\n    })\n  });\n}","map":{"version":3,"sources":["C:/Users/jjleo/Documents/WDMM/Term_4/Nimble/nimble-project/src/component/modal/modalForAddRewards.js"],"names":["Center","FormControl","Heading","HStack","Text","VStack","Input","Stack","Slider","Box","TextArea","ScrollView","Button","Image","useRef","useState","colors","ImagePicker","RecordVideo","Video","Camera","ModalForAddRewards","handleShowModal","image","setImage","video","setVideo","onRecording","setOnRecording","stopRec","setStopRec","videoRef","sliderValue","setSliderValue","cameraPermission","setCameraPermission","recordVideoPermission","setRecordVideoPermission","audioPermission","setAudioPermission","sliderOnChange","v","Math","floor","sliderOnChangeEnd","pickImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","result","uri","takePhoto","requestCameraPermissionsAsync","status","launchCameraAsync","s","requestMicrophonePermissionsAsync","audio","startRecordVideo","current","recordAsync","alert","stopRecordVideo","stopRecording","closeVideoRecording","gray","width","height"],"mappings":"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","sourcesContent":["import { Center, FormControl, Heading, HStack, Text, VStack, Input, Stack, Slider, Box, TextArea, ScrollView, Button, Image} from \"native-base\";\r\nimport { useRef, useState } from \"react\";\r\nimport { colors } from \"../utilis/colors\";\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport RecordVideo from \"../layout/recordVideo\";\r\nimport { Video } from \"expo-av\";\r\nimport { Camera } from \"expo-camera\";\r\n\r\nexport default function ModalForAddRewards({handleShowModal}){\r\n    const [image, setImage] = useState();\r\n    const [video, setVideo] = useState()\r\n    const [onRecording, setOnRecording] = useState(false)\r\n    const [stopRec, setStopRec] = useState(false)\r\n    const videoRef = useRef(null)\r\n    const [sliderValue, setSliderValue] = useState(0)\r\n\r\n    const [cameraPermission, setCameraPermission] = useState()\r\n    const [recordVideoPermission, setRecordVideoPermission] = useState()\r\n    const [audioPermission, setAudioPermission] = useState()\r\n\r\n    const sliderOnChange = (v)=>{\r\n            setSliderValue(Math.floor(v))\r\n    }\r\n\r\n    const sliderOnChangeEnd = (v)=>{\r\n        setSliderValue(Math.floor(v))\r\n    }\r\n\r\n    const pickImage = async () => {\r\n        // No permissions request is necessary for launching the image library\r\n        let result = await ImagePicker.launchImageLibraryAsync({\r\n          mediaTypes: ImagePicker.MediaTypeOptions.All,\r\n          allowsEditing: true,\r\n          aspect: [4, 3],\r\n          quality: 1,\r\n        });\r\n        result ? setImage(result.uri) : null\r\n    }\r\n\r\n    const takePhoto = async ()=>{\r\n        const { status } = await Camera.requestCameraPermissionsAsync();\r\n        setCameraPermission(status === 'granted');\r\n\r\n        // const {status} = await ImagePicker.getCameraPermissionsAsync()\r\n        // setCameraPermission(status === 'granted');\r\n        // const s = await ImagePicker.getCameraLibraryAsync().status\r\n        // setRecordVideoPermission(s === \"granted\")\r\n        const {uri} = await ImagePicker.launchCameraAsync()\r\n        setImage(uri)\r\n        const s = await Camera.requestCameraPermissionsAsync().status\r\n        setRecordVideoPermission(s === \"granted\")\r\n        const audio = await Camera.requestMicrophonePermissionsAsync().status\r\n        setAudioPermission(audio === \"granted\")\r\n    }\r\n\r\n    const startRecordVideo = async ()=>{\r\n        try {\r\n            const {uri} = await videoRef.current.recordAsync({ quality: '1080p'})\r\n            alert(uri)\r\n            setVideo(uri)\r\n        } catch (error) {\r\n            alert(error)\r\n        } \r\n    }\r\n    const stopRecordVideo = ()=>{\r\n       \r\n        const stopRec = videoRef.current.stopRecording()\r\n    }\r\n\r\n    const closeVideoRecording = ()=>{\r\n        setOnRecording(false)\r\n    }\r\n\r\n\r\n    return(\r\n        <>\r\n        { onRecording ? <RecordVideo start={startRecordVideo} videoRef={videoRef} stop={stopRecordVideo} close={closeVideoRecording}/> : \r\n        <ScrollView>\r\n        <Center>\r\n            <VStack w=\"100%\">\r\n            <HStack alignItems=\"center\" justifyContent=\"space-around\" mt=\"60\" mb=\"30\">\r\n                <Text onPress={()=>handleShowModal(false)}>Cancel</Text>\r\n                <Heading>Add Rewards</Heading>\r\n                <Text>Save</Text>\r\n            </HStack>\r\n\r\n            <Center>\r\n                <FormControl w=\"80%\">\r\n                    <Stack mb=\"5\">\r\n                        <FormControl.Label>Title</FormControl.Label>\r\n                        <Input p={2} placeholder=\"Title\" p=\"6\" borderRadius=\"10\"/>\r\n                    </Stack>\r\n                    <Stack mb=\"5\">\r\n                        <FormControl.Label>URL/Link</FormControl.Label>\r\n                        <Input p={2} placeholder=\"URL/Link\" p=\"6\" borderRadius=\"10\"/>\r\n                    </Stack>\r\n\r\n                    <VStack mb=\"5\">\r\n                        <Text>Points</Text>\r\n                        <Box bg={colors.gray}  mt=\"3\"  borderRadius=\"10\" p=\"5\">\r\n                            <Slider size=\"lg\" defaultValue={0} onChange={sliderOnChange} onChangeEnd={sliderOnChangeEnd} videoRef={videoRef}>\r\n                            <Slider.Track>\r\n                                <Slider.FilledTrack />\r\n                            </Slider.Track>\r\n                            <Slider.Thumb />\r\n                            </Slider>\r\n                            <Text textAlign=\"center\"> {sliderValue}</Text>\r\n                        </Box>\r\n                        <Text mt=\"2\" fontSize=\"10\">Required Points</Text>\r\n                    </VStack>\r\n\r\n                    <VStack  mb=\"5\">\r\n                    <Text>Attached Photos/Video</Text>\r\n                    {image ?   <Image source={{ uri: image }} style={{ width: 200, height: 200 }} alt=\"image\"/> : null}\r\n                    {video ? <Video style={{ width: 200, height: 200 }}\r\n                    source={{uri : video}} useNativeControls resizeMode=\"contain\" \r\n                    /> : null}\r\n                    <Button onPress={takePhoto} mb=\"2\">take an  image</Button>\r\n                    <Button onPress={()=>setOnRecording(true)} mb=\"2\">record a video</Button>\r\n                    <Button onPress={pickImage}>Pic image</Button>\r\n                    <Button onPress={()=>alert(video)}>see url</Button>\r\n                    </VStack>\r\n\r\n                    <Stack mb=\"5\">\r\n                        <FormControl.Label>Notes</FormControl.Label>\r\n                        <TextArea p={2} placeholder=\"Instruction, Guide, Help...\" p=\"6\" borderRadius=\"10\" height=\"150\"/>\r\n                    </Stack>\r\n                    \r\n                    <VStack space=\"6\" mb=\"70\">                    \r\n                    <Button p=\"5\" borderRadius=\"10\">Save</Button>\r\n                    <Center>\r\n                    <Button w=\"80%\" p=\"4\" borderRadius=\"10\" onPress={()=>handleShowModal(false)}>Cancel/Delete</Button>\r\n                    </Center>\r\n                    </VStack>\r\n                </FormControl>\r\n            </Center>\r\n            </VStack>\r\n        </Center>\r\n    </ScrollView>\r\n    }\r\n    </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}